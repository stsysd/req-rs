{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "req Configuration",
  "description": "Configuration file for req - HTTP request builder",
  "type": "object",
  "properties": {
    "tasks": {
      "description": "HTTP request tasks",
      "type": "object",
      "additionalProperties": {
        "$ref": "#/definitions/Task"
      }
    },
    "variables": {
      "description": "Variables for string interpolation",
      "type": "object",
      "additionalProperties": {
        "type": "string"
      }
    },
    "config": {
      "$ref": "#/definitions/Config"
    }
  },
  "definitions": {
    "Task": {
      "type": "object",
      "properties": {
        "GET": {
          "type": "string",
          "description": "URL for GET request"
        },
        "POST": {
          "type": "string",
          "description": "URL for POST request"
        },
        "PUT": {
          "type": "string",
          "description": "URL for PUT request"
        },
        "DELETE": {
          "type": "string",
          "description": "URL for DELETE request"
        },
        "HEAD": {
          "type": "string",
          "description": "URL for HEAD request"
        },
        "OPTIONS": {
          "type": "string",
          "description": "URL for OPTIONS request"
        },
        "CONNECT": {
          "type": "string",
          "description": "URL for CONNECT request"
        },
        "PATCH": {
          "type": "string",
          "description": "URL for PATCH request"
        },
        "TRACE": {
          "type": "string",
          "description": "URL for TRACE request"
        },
        "description": {
          "type": "string",
          "description": "Description of the task"
        },
        "headers": {
          "type": "object",
          "description": "HTTP headers",
          "additionalProperties": {
            "oneOf": [
              {
                "type": "string"
              },
              {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            ]
          }
        },
        "queries": {
          "type": "object",
          "description": "Query parameters",
          "additionalProperties": {
            "oneOf": [
              {
                "type": "string"
              },
              {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            ]
          }
        },
        "body": {
          "type": "object",
          "description": "Request body",
          "properties": {
            "plain": {
              "type": "string",
              "description": "Plain text body"
            },
            "json": {
              "description": "JSON body",
              "type": "object"
            },
            "form": {
              "type": "object",
              "description": "Form-encoded body",
              "additionalProperties": {
                "type": "string"
              }
            },
            "multipart": {
              "type": "object",
              "description": "Multipart form data",
              "additionalProperties": {
                "oneOf": [
                  {
                    "type": "string",
                    "description": "Text value"
                  },
                  {
                    "type": "object",
                    "properties": {
                      "file": {
                        "type": "string",
                        "description": "File path"
                      }
                    },
                    "required": ["file"],
                    "additionalProperties": false
                  }
                ]
              }
            }
          },
          "oneOf": [
            {
              "required": ["plain"]
            },
            {
              "required": ["json"]
            },
            {
              "required": ["form"]
            },
            {
              "required": ["multipart"]
            }
          ]
        },
        "auth": {
          "type": "object",
          "description": "Authentication configuration",
          "oneOf": [
            {
              "properties": {
                "bearer": {
                  "type": "string",
                  "description": "Bearer token"
                }
              },
              "required": ["bearer"],
              "additionalProperties": false
            },
            {
              "properties": {
                "basic": {
                  "type": "object",
                  "properties": {
                    "username": {
                      "type": "string",
                      "description": "Username for basic auth"
                    },
                    "password": {
                      "type": "string",
                      "description": "Password for basic auth"
                    }
                  },
                  "required": ["username", "password"],
                  "additionalProperties": false
                }
              },
              "required": ["basic"],
              "additionalProperties": false
            }
          ]
        },
        "config": {
          "$ref": "#/definitions/Config"
        }
      },
      "oneOf": [
        {
          "required": ["GET"]
        },
        {
          "required": ["POST"]
        },
        {
          "required": ["PUT"]
        },
        {
          "required": ["DELETE"]
        },
        {
          "required": ["HEAD"]
        },
        {
          "required": ["OPTIONS"]
        },
        {
          "required": ["CONNECT"]
        },
        {
          "required": ["PATCH"]
        },
        {
          "required": ["TRACE"]
        }
      ]
    },
    "Config": {
      "type": "object",
      "description": "Configuration options",
      "properties": {
        "insecure": {
          "type": "boolean",
          "description": "Ignore verifying the SSL certificate",
          "default": false
        },
        "redirect": {
          "type": "integer",
          "description": "Maximum number of redirects",
          "minimum": 0,
          "default": 0
        },
        "env-file": {
          "description": "Environment file to load variables from",
          "oneOf": [
            {
              "type": "boolean",
              "description": "false: don't load, true: load .env"
            },
            {
              "type": "string",
              "description": "Path to environment file"
            }
          ],
          "default": false
        },
        "proxy": {
          "$ref": "#/definitions/Proxy"
        }
      },
      "additionalProperties": false
    },
    "ProxyUrl": {
      "description": "Proxy URL configuration",
      "oneOf": [
        {
          "type": "string",
          "description": "Simple proxy URL"
        },
        {
          "type": "object",
          "description": "Proxy URL with authentication",
          "properties": {
            "url": {
              "type": "string",
              "description": "Proxy URL"
            },
            "username": {
              "type": "string",
              "description": "Proxy username"
            },
            "password": {
              "type": "string",
              "description": "Proxy password"
            }
          },
          "required": ["url", "username", "password"],
          "additionalProperties": false
        }
      ]
    },
    "Proxy": {
      "description": "Proxy configuration",
      "oneOf": [
        {
          "$ref": "#/definitions/ProxyUrl",
          "description": "Simple proxy configuration for all protocols"
        },
        {
          "type": "object",
          "description": "Detailed proxy configuration with separate settings for HTTP and HTTPS",
          "properties": {
            "http": {
              "$ref": "#/definitions/ProxyUrl",
              "description": "HTTP proxy configuration"
            },
            "https": {
              "$ref": "#/definitions/ProxyUrl",
              "description": "HTTPS proxy configuration"
            }
          },
          "additionalProperties": false
        }
      ]
    }
  }
}
